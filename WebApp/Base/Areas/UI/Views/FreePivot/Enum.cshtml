<form id="dataForm" method="post" style="width: 100%; height: 100%;">
<div class="mini-toolbar" id="btnDiv">
    <table>
        <tr>
            <td>
                <a class="mini-button" iconcls="icon-add" onclick="addRow({},{gridId:'Enum',isLast:true});">
                    增加枚举</a>
                <a class="mini-button" iconcls="icon-remove" onclick="delRow({gridId:'Enum'});">删除枚举</a>
                <a class="mini-button" plain="true" iconcls="icon-save" onclick="save();">保存</a>
                <a class="mini-button" plain="true" iconcls="icon-cancel" onclick="closeWindow()">取消</a>
            </td>
            <td id="btnRight">
            </td>
        </tr>
    </table>
</div>
<div class="mini-fit"  style="width: 100%; height: 476px;">
    <div id="Enum" class="mini-datagrid" style="width: 100%; height: 100%;" multiselect="true"
        allowcelledit="true" allowcellselect="true" showpager="false" allowcellvalid="true">
        <div property="columns">
            <div type="checkcolumn">
            </div>
            <div field="FieldName" width="150px" vtype="required;">
                字段名称
                <input property="editor" class="mini-textbox" style="width: 100%;" /></div>
            <div field="EnumKey" width="*" vtype="required;">
                枚举Key或枚举定义
                <input property="editor" name="data" class="mini-buttonedit" style="width: 100%;" onbuttonclick="onDataClick" /></div>
        </div>
    </div>
</div>
</form>
<script type="text/javascript">
    function onDataClick() {
        var btn = mini.getbyName("data");
        var data = btn.getValue();
        openWindow('/MvcConfig/Meta/Enum/EnumEdit', { width: 350, height: 300, data: data, onDestroy: function (s) {
            if (s != "close") {
                var d = s;
                if (typeof (s) == "object" || typeof (s) == "array" || s.constructor == Array || s.constructor == Object)
                    var d = mini.encode(s);
                btn.setValue(d);
                btn.setText(d);
            }
        }
        });
    }

</script>
