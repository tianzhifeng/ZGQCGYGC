var $jscomp={scope:{},findInternal:function(m,l,k){m instanceof String&&(m=String(m));for(var q=m.length,t=0;t<q;t++){var v=m[t];if(l.call(k,v,t,m))return{i:t,v:v}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(m,l,k){if(k.get||k.set)throw new TypeError("ES3 does not support getters and setters.");m!=Array.prototype&&m!=Object.prototype&&(m[l]=k.value)};
$jscomp.getGlobal=function(m){return"undefined"!=typeof window&&window===m?m:"undefined"!=typeof global?global:m};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(m,l,k,q){if(l){k=$jscomp.global;m=m.split(".");for(q=0;q<m.length-1;q++){var t=m[q];t in k||(k[t]={});k=k[t]}m=m[m.length-1];q=k[m];l=l(q);l!=q&&null!=l&&$jscomp.defineProperty(k,m,{configurable:!0,writable:!0,value:l})}};
$jscomp.polyfill("Array.prototype.find",function(m){return m?m:function(m,k){return $jscomp.findInternal(this,m,k).v}},"es6-impl","es3");
(function(m,l,k){function q(a){a=JSON.stringify(a);return v?a.replace(/\\u([0-9a-fA-F]{2,4})/g,function(a,c){return String.fromCharCode(parseInt(c,16))}):a}function t(a,b){var c=[],d={},e;for(e in a){var n={},r=a[e];h.is("String",r)&&(v||0!=r.indexOf("ey"))?(n["b64_"+e]=a[e],c.push(n)):d[e]=r}var D=[];(function(a){for(var b in a)D.push((new f(b,a[b])).load(f.options))})(d);if(d=c.length)for(e=f.options.signSize||5,n=Math.ceil(d/e),r=1;r<=n;r++)K.request(f.options.b64Url,c.slice(e*(r-1),e*r>d?d:e*
r)).ret(function(a){if(a.result)for(var b in a){if(0==b.indexOf("b64_")){var c=a[b];h.is("String",c)&&(c=JSON.parse(c));D.push((new f(b.substring(4),c)).load(f.options))}}else f.prototype.warning.call(null,a)});K.fin(function(a,c,d){b&&b(1==D.length?D[0]:D)})}var v=!1;m.JSON&&(v='{"x":"\u4e2d"}'!==m.JSON.stringify({x:"\u4e2d"}));var z=!0;try{m.document.createElement("canvas").getContext("2d")}catch(a){z=!1}var h=l.Utils,E=k(window),A=k(document),u=document.documentElement,B=!!("minWidth"in u.style)&&
"onlosecapture"in u,g="setCapture"in u,p,x,F=function(a){p&&(a=a.originalEvent?a.originalEvent.touches.item(0):a.touches.item(0));return a},J=function(a){this.start=k.proxy(this.start,this);this.over=k.proxy(this.over,this);this.end=k.proxy(this.end,this);this.onstart=this.onover=this.onend=k.noop;x||(p="mousedown"!=a.type,x={start:p?"touchstart":"mousedown",over:p?"touchmove":"mousemove",end:p?"touchend":"mouseup"})};J.prototype={start:function(a){a=this.startFix(a);C.trigger("dragStart",this,a);
A.on(x.over,this.over).on(x.end,this.end);this.onstart(a);return!1},over:function(a){a=this.overFix(a);C.trigger("dragOver",this,a);this.onover(a);return!1},end:function(a){a=this.endFix(a);C.trigger("dragEnd",this,a);A.off(x.over,this.over).off(x.end,this.end);this.onend(a);return!1},startFix:function(a){a=F(a);this.target=k(a.target);this.selectstart=function(){return!1};A.on("selectstart",this.selectstart).on("dblclick",this.end);if(B)this.target.on("losecapture",this.end);else E.on("blur",this.end);
g&&this.target[0].setCapture();return a},overFix:function(a){return a=F(a)},endFix:function(a){a=F(a);A.off("selectstart",this.selectstart).off("dblclick",this.end);B?this.target.off("losecapture",this.end):E.off("blur",this.end);g&&this.target[0].releaseCapture();return a}};J.create=function(a,b,c){var d=k(a),e=new J(b),n=x.start,f=function(){},D=a.className.replace(/^\s|\s.*/g,"")+"-drag-start",g=d[0].style,h,p,m,l,F=0,u=0,t=parseInt(g.left),q=parseInt(g.top),v=t,w=q,y=t,z=q;c&&(v=parseInt(g.marginLeft),
w=parseInt(g.marginTop),y=v,z=w);var B={onstart:f,onover:f,onend:f,off:function(){d.off(n,e.start)}};e.onstart=function(b){var c="fixed"===d.css("position"),e=A.scrollLeft(),n=A.scrollTop(),f=d.width(),r=d.height();p=h=0;m=c?E.width()-f+h:A.width()-f;l=c?E.height()-r+p:A.height()-r;r=d.offset();f=this.startLeft=c?r.left-e:r.left;c=this.startTop=c?r.top-n:r.top;this.clientX=b.clientX;this.clientY=b.clientY;r=d.parent();r.is("body")||(F=r[0].getBoundingClientRect().left+e,u=r[0].getBoundingClientRect().top+
n);d.addClass(D);B.onstart.call(a,b,f,c)};e.onover=function(b){var e=b.clientX-this.clientX+this.startLeft,n=b.clientY-this.clientY+this.startTop,f=d[0].style,e=Math.max(h,Math.min(m,e)),n=Math.max(p,Math.min(l,n));c?(e=f.marginLeft=e-F-t+"px",n=f.marginTop=n-u-q+"px"):(e=f.left=e-F+"px",n=f.top=n-u+"px");y=parseInt(e);z=parseInt(n);B.onover.call(a,b,e,n)};e.onend=function(b){var e=d.position(),n=e.left,e=e.top;d.removeClass(D);var f=d[0].style,r=!0;6>Math.abs(y-v)&&6>Math.abs(z-w)&&(r=!1);c?B.onend.call(a,
b,r,f.marginLeft,f.marginTop):B.onend.call(a,b,r,n,e)};e.off=function(){d.off(n,e.start)};if(b)e.start(b);else d.on(n,e.start);return B};var u=l.Listener,G=function(){};k.extend(G.prototype,u.prototype);var y=function(){};y.className=y.name||"SealService";h.inherit(y,G);k.extend(y.prototype,{loadSeal:function(){throw Error("must impl");},saveLog:function(){},verifyPwd:function(){throw Error("must impl");}});var H=function(){};H.className=H.name||"CertService";h.inherit(H,G);k.extend(H.prototype,{sign:function(){throw Error("must impl");
},verifySign:function(){throw Error("must impl");}});G=function(){};k.extend(G.prototype,{getAttr:function(a){return this[a]},setAttr:function(a){var b=this;k.each(a,function(a,d){if("function"===typeof b[a])b[a](d);else b[a]=d})},removeAttr:function(a){delete this[a]}});var f=function(a,b){var c=this;c.signatureid=a;c.setSignatureData(b);c.on("load",function(){f.list[a]=this});c.on("remove",function(a){a=c._getLogInfo(h.extend(a||{},{LOGTYPE:"00",LOGSORT:"14",LOGMEMO:"\u64a4\u9500\u7b7e\u7ae0\u6210\u529f"}));
c.sealService.saveLog(a);delete f.list[c.signatureid]});c.on("update",function(a){"signMeta"===c._item&&(a=c._getLogInfo(h.extend(a||{},{LOGTYPE:"00",LOGSORT:"304",LOGMEMO:"\u6570\u5b57\u7b7e\u540d\u6210\u529f"})),c.sealService.saveLog(a))});c.on("fireremove",function(){f.removeList.push(c.signatureid)});c.on("fireupdate",function(){for(var a=!1,b=0;b<f.updateList.length;b++)if(f.updateList[b]===c){a=!0;break}a||f.updateList.push(c)});for(var d in f)f.hasOwnProperty(d)&&0==d.indexOf("on")&&(this[d]=
f[d]);return this},L=function(a,b,c){var d;if(z){d=m.document.createElement("canvas");d.height=c;d.width=b;var e=d.getContext("2d"),n=new Image;n.src=a;n.onload=function(){e.drawImage(n,0,0,b,c)}}else d=m.document.createElement("img"),d.style.width=b+"px",d.style.height=c+"px",d.setAttribute("src",a);return d};h.inherit(f,G);k.extend(f.prototype,u.prototype);k.extend(f.prototype,{hashAlg:"sha1",encryptAlg:"RSA",_init:function(){},_getLogInfo:function(a){var b=this.signatureData;return h.extend(a||
{},{KEYSN:b.keysn,SIGNSN:b.seal.signsn,DOCUMENTID:b.documentid,DOCUMENTNAME:b.documentname,APPVERSION:M.name,APPTYPE:"HTML"})},warning:function(a){var b=a;h.is("Object",a)&&(b=a.errcode&&"511"!=a.errcode?a.errcode:a.errmsg);b||(b="\u91d1\u683c\u7ec4\u4ef6\u672a\u77e5\u9519\u8bef");var c=h.is("String",arguments[1])?c:"then",d=arguments[arguments.length-1];w.alert(l.msg(b,c),function(){w.hideLoading();return h.is("Function",d)?d():!0})},error:function(a,b,c){var d=a;h.is("Object",a)&&(d=a.errcode&&
"511"!=a.errcode?a.errcode:a.errmsg);d||(d="\u91d1\u683c\u7ec4\u4ef6\u672a\u77e5\u9519\u8bef");b=h.is("String",b)?b:"then";w.alert(l.msg(d,b),function(){w.hideLoading();return h.is("Function",c)?c():!0})},load:function(a){this.trigger("beforeLoad");this.setAttr(a);this.certService=new f.factory.cert[f.options.certType](a,this.signatureData);var b=this.signatureData;void 0!==a.extra&&null!==a.extra&&void 0!==a.extra[this.signatureid]&&void 0!==a.extra[this.signatureid].scaleImage&&null!==a.extra[this.signatureid].scaleImage?
(b.seal.height*=a.extra[this.signatureid].scaleImage,b.seal.width*=a.extra[this.signatureid].scaleImage):void 0!==a.scaleImage&&null!==a.scaleImage&&(b.seal.height*=a.scaleImage,b.seal.width*=a.scaleImage);this.sealService=new f.factory.seal[f.options.sealType](a,b);this._init();this.trigger("load");return this},toBase64Img:function(a){var b=a.imgdata,c=b.indexOf(a.signsn);if(-1==c)return b;b=a.imgdata.substring(c+65);return h.Base64.of().encodeByte(h.Base64.of(a.signsn).decodeByte(b))},clearImg:function(){if(this.imgEles)for(var a in this.imgEles)this.trigger("removeAt",
this.imgEles[a][0]),this.imgEles[a].remove();this.imgEles={}},repaint:function(){this.clearImg();this.verify()},getUpdateType:function(){return this._item},updatePos:function(a,b){var c=this.signatureData.position[a];this._item="position";this.signatureData.position[a]=h.extend({},c,b)},updateItem:function(a,b){this._item=a;this.signatureData[a]=b},fireUpdate:function(a){var b=this,c=function(c){a&&a(c);b[c?"update":"restore"]();delete b._item};f.asyn.update?f.asyn.update.call(b,c):(this.trigger("fireupdate"),
c(!0));return this},restore:function(){this.setSignatureData(this.oriSignatureData);this.repaint()},update:function(){this.setSignatureData(this.signatureData);this.repaint();this.trigger("update");return this},remove:function(){this.clearImg();this.trigger("remove");for(var a in this)delete this[a];return this},fireRemove:function(a){var b=this,c=function(c){a&&a(c);c&&b.remove()};f.asyn.remove?f.asyn.remove.call(b,c):(this.trigger("fireremove"),c(!0));return this},hide:function(){if(this.imgEles)for(var a in this.imgEles)this.imgEles[a].hide()},
createImg:function(){var a=this.signatureData,b=k(document.createElement("img")),c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVR42mNgAAIAAAUAAen63NgAAAAASUVORK5CYII=";this.broken||(c="data:image/"+a.seal.imgext+";base64,"+this.toBase64Img(a.seal));b.css({width:Math.ceil(9600*parseFloat(a.seal.width)/254),height:Math.ceil(9600*parseFloat(a.seal.height)/254)}).attr({src:c});return b},show:function(){var a=this.signatureData.position,b=this.imgEles=this.imgEles||{},c;
for(c in a){var d="kg-img-div-"+this.signatureid+"-"+c,e=b[d];e||(e=b[d]=this.showAt(c,a[c]));this._handleImg(e)}this.trigger("show")},showAt:function(a,b){this.trigger("beforeShowAt",a,b);var c=h.$(a),d=k(c);if(0==d.length)if(f.options.defaultPos)a=f.options.defaultPos,d=k(h.$(a));else throw Error("no find position:"+a+" signatureid="+this.signatureid);var e=this.createImg();e.addClass("kg-img").attr("id","kg-img-"+this.signatureid);c=k(document.createElement("div")).addClass("kg-img-div").addClass("kg-img-div-"+
a).attr({id:"kg-img-div-"+this.signatureid+"-"+a,elemid:a,signatureid:this.signatureid});c.append(e);var e=c,n="kg-default",r,g=d.attr("display");if(g)d.addClass("display-"+g),n="kg-"+g,r=d,e=document.getElementById("kg-img-container-"+a),e||(e=document.createElement("div"),e.setAttribute("id","kg-img-container-"+a)),e=k(e).addClass(n+"-container"),e.append(c),c.attr("kg-display",!0);else if(r=d.offsetParent(),"html"==r[0].tagName.toLowerCase()||"relative"==r[0].style.position)r=k("body");c.addClass(n);
r.append(e);if(g){if("landscape"===g){var d=e.children(),n=e.parent().width(),p=0;d.each(function(){p+=parseInt(k(this).width())+1});e.width(p>n?p:n)}}else this.calSealPos(d,c,e,b);this.trigger("showAt",c[0],a,b);return c},calSealPos:function(a,b,c,d){var e=a.offsetParent();c=c||b;if("html"==e[0].tagName.toLowerCase()||"relative"==e[0].style.position)e=k("body");a=a.offset();var n=e.offset();e.is("body")&&(n={top:0,left:0});c.css({top:a.top-n.top,left:a.left-n.left});d?(e=d.marginLeft,d=d.marginTop):
(e=b.css("marginLeft"),d=b.css("marginTop"));b.css({marginLeft:e||0,marginTop:d||0})},canSign:function(){return!this.modified&&!f.options.readonly&&f.options.signable&&!this.signatureData.signMeta},canMove:function(a){return!f.options.readonly&&this.signatureData.moveable&&f.options.moveable&&!k(a).attr("kg-display")},canDelete:function(){return!f.options.readonly},_handleImg:function(a){a.show();if(0==a.children(".kg-shade").length){var b=k(document.createElement("div")).addClass("kg-shade");b.append(L("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVR42mNgAAIAAAUAAen63NgAAAAASUVORK5CYII=",
a.width(),a.height()));a.append(b)}this._invalid(a);this.trigger("handleImg",a[0])},setSignatureData:function(a){h.is("String",a)?this.signatureData=JSON.parse(h.Base64.of().decode(a)):this.signatureData=a;this.oriSignatureData=JSON.parse(JSON.stringify(this.signatureData))},getSignatureid:function(){return this.signatureid},getSignatureData:function(){var a=JSON.stringify(this.signatureData);return h.Base64.of().encode(a)},_invalid:function(a){var b=a.children(".kg-invalid");if(0==b.length){b=k(document.createElement("div")).addClass("kg-hide").addClass("kg-invalid");
a.append(b);var c=a.height()/3;b.css({top:c,height:c});for(var c=c/3,d=a.width(),e=0;3>e;e++){var n=k(document.createElement("div")).height(c);0==e%2&&(n.addClass("kg-invalid-item"),n.append(L("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVR42mNoaGgAAAMEAYF1LgG8AAAAAElFTkSuQmCC",d,c)));b.append(n)}}if(this.modified){c="";for(d=0;d<this.modifiedItems.length;d++)e=this.modifiedItems[d],c+=e.desc+"["+e.field+"]\u7531{"+e.orivalue+"}\u66f4\u6539\u4e3a{"+e.newvalue+"};";a.attr("modified",
c).addClass("error");b.removeClass("kg-hide")}else a.removeAttr("modified").removeClass("error"),b.addClass("kg-hide")},_verify:function(a){this.trigger("before_verify");a=this.verifyProtectedData(a);this.show();this.trigger("_verify");return!a},verify:function(a){this.trigger("beforeVerify");a=this._verify(a);this.trigger("verify");return a},getVerifyProtectedData:function(){for(var a=this.validatedData,b=this.signatureData.protectedData,c={},d=0;d<b.length;d++){var e=b[d],n=e.field,f=a&&a[n];f||
(f=(f=h.$(n))?f.getAttribute("kg-value")||f.value:document.getElementById(e.name).value);e=h.val(f,this);e=this._formatValue(e);c[n]=e}return c},getH5SignData:function(){var a=this.hashAlg,b=this.encryptAlg,c=CryptoJS.SHA1(this.getSignData()).toString();return[{hashAlg:a,encryptAlg:b,signdata:c}]},verifyProtectedData:function(a){a&&(this.validatedData=a);a=[];for(var b=this.getVerifyProtectedData(),c=this.signatureData.protectedData,d=0;d<c.length;d++){var e=c[d],f=b[c[d].field];f!==e.value&&a.push({field:e.field,
desc:e.desc,orivalue:e.value,newvalue:f})}this.modified=0<a.length;this.modifiedItems=a;return this.modified},verifySignData:function(a){var b=this;w.showLoading();var c=this.certService,d;if(this.signatureData.signMeta.html2sign){c instanceof I||(c=new I(f.options),c.sData=b.signatureData);d=b.getVerifyProtectedData();for(var e=this.signatureData.protectedData,n=[],r=0;r<e.length;r++){var g=e[r],h={},p;for(p in g)g.hasOwnProperty(p)&&(h[p]=g[p]);h.value=d[g.field];n.push(h)}d=q(n)}else d=this.getValidatedSignData();
c.verifySign(k.extend({signeddata:this.signatureData.signMeta.signeddata,crtdata:this.signatureData.signMeta.certinfo.crtdata,keysn:this.signatureData.keysn,signsn:this.signatureData.seal.signsn,signdata:d},{successCall:function(c){w.hideLoading();if(!c.errcode){var d=!c.result;d&&b.verify();b.signModified=d}a&&a(c)},errorCall:function(a){b.error(a)}}))},_renderValue:function(a){return a.replace(/\r\n/ig,"<br>")},_formatValue:function(a,b){var c=a;c&&(c=c.replace(/\r\n/ig,"\n"),c=c.replace(/\n/ig,
"\r\n"));return c},getItemVal:function(a){var b;if(b=h.is("String",a)?h.$(a):a)return a=b.tagName.toLowerCase(),"input"===a||"textarea"===a||"select"===a?b.getAttribute("kg-value")||b.value:b.getAttribute("kg-value")||(v?b.innerText:b.textContent);throw Error("No find protectedItem:"+a+" signatureid="+this.signatureid);},getProtectedData:function(a){var b=this,c=[],d=function(a){var c=h.$(a);if(c){var d={field:a};d.desc=c.getAttribute("kg-desc")||a;d.value=b.getItemVal(c);return d}throw Error("No find protectedItem:"+
a+" signatureid="+this.signatureid);},e=function(a){if(h.is("String",a))a=d(a);else if(!h.is("Object",a)||!a.field)throw Error("Unsupported protectedItems:"+a.toString);h.is("Function",a.value)&&(a.value=a.value.call(b,a.field,a.desc));a.value=b._formatValue(a.value);return a};if(a)if(h.is("Array",a))for(var f=0,r=a.length;f<r;f++)c.push(e(a[f]));else c.push(e(a));return c},__findSignedData:function(a){if(h.is("String",a))return a.split(";")[0];if(h.is("Array",a))return a[0];throw Error("error signeddata: "+
a);},getValidatedSignData:function(){var a=this.getVerifyProtectedData(),a=q(a),a=h.Base64.of().encode(a);return CryptoJS.SHA1(a).toString()},getSignData:function(a){a=(a||this.signatureData).protectedData;for(var b={},c=0;c<a.length;c++)b[a[c].field]=a[c].value;return h.Base64.of().encode(q(b))},showSignSignatureDialog:function(a){var b={target:h.is("Array",a.target)?a.target:[a.target],title:"\u6570\u5b57\u7b7e\u540d",onShow:function(){var a=this;setTimeout(function(){a.find("#kg-password").focus()},
40)},onOk:function(){var b=this.find("#kg-password");if(!b.val())return w.alert("\u8bf7\u8f93\u5165\u5bc6\u7801\uff01",function(){b.focus()}),!1;a._onOk.call(this,b.val());return!1}};return this.showDialog("signSignatureBtl",b)},signSignature:function(a){var b=this;return b.showSignSignatureDialog({target:b,_onOk:function(c){var d=this,e=b.getH5SignData();b.runSign(e,c,function(c){c.result?b.fireUpdate(function(a){a&&d.remove()}):b.warning(c);a&&a(c)})}})},showRevokeSignatureDialog:function(a){var b=
{target:h.is("Array",a.target)?a.target:[a.target],title:"\u64a4\u9500\u7b7e\u7ae0",onShow:function(){var a=this;setTimeout(function(){a.find("#kg-password").focus()},40)},onOk:function(){var b=this.find("#kg-password");if(!b.val())return w.alert("\u8bf7\u8f93\u5165\u5bc6\u7801\uff01",function(){b.focus()}),!1;a._onOk.call(this,b.val());return!1}};return this.showDialog("revokeSignatureBtl",b)},revokeSignature:function(a){var b=this;if(void 0===f.options.delCallBack||!f.options.delCallBack||f.options.delCallBack(b.signatureid,
b.signatureData))return b.showRevokeSignatureDialog({target:b,_onOk:function(c){var d=this;w.showLoading();b.sealService.verifyPwd({pwd:c,keysn:b.signatureData.keysn,successCall:function(c){w.hideLoading();c.result?b.fireRemove(function(a){a&&d.remove()}):b.warning(c);a&&a(c)},errorCall:function(a){b.error(a)}})}})},showDialog:function(a,b){var c=h.is("Array",b.target)?b.target:[b.target],d=h.extend({title:"\u7535\u5b50\u7b7e\u7ae0",onCancel:b.errCall||function(){w.hideLoading();return!0},content:function(){var b=
[f.options.template[a]].concat(c);return h.template.apply(null,b)}},b),d=w.showDialog(a,d);if("showSealsBtl"===a){var e=d.find("#sealTpl-dialog"),n=!1,r=0,g=0,p=0,k=0;e.prevObject[0].onmousedown=function(a){n=!0;a=a||event;r=a.clientX;g=a.clientY;p=parseInt(e.prevObject[0].style.top);k=parseInt(e.prevObject[0].style.left)};e.prevObject[0].onmousemove=function(a){if(n){a=a||event;var b=k+a.clientX-r;a=p+a.clientY-g;0<b&&0<a&&(e.prevObject[0].style.left=b+"px",e.prevObject[0].style.top=a+"px")}};e.prevObject[0].onmouseup=
function(a){n&&(n=!1,k=p=g=r=0)}}return d},runMove:function(a,b,c){var d=this;C.trigger("startMove",d,a,b);b=J.create(b,a,!0);b.onend=function(a,b,f,g){c&&c(b,f,g);C.trigger("endMove",d,a,f,g);b&&(a=k(this),d.updatePos(a.attr("elemid"),{marginLeft:f,marginTop:g}),d.fireUpdate())};a.preventDefault();return b},runSign:function(a,b,c){var d=this,e=d.signatureData;w.showLoading();d.certService.sign({keysn:this.signatureData.keysn,signsn:this.signatureData.seal.signsn,password:b,signMeta:a,successCall:function(b){w.hideLoading();
b.result&&(b.signeddata?(b.certinfo.algName=b.certinfo.algName.toUpperCase(),d.updateItem("signMeta",{hashAlg:a[0].hashAlg,encryptAlg:a[0].encryptAlg,signdata:a[0].signdata,signeddata:d.__findSignedData(b.signeddata),certinfo:b.certinfo})):(b.result=!1,b.errcode="signErr"),e.certType=f.options.certType);c&&c(b)},errorCall:function(a){d.error(a)}})}});var w=kingPlus();f.options=k.extend({b64Url:"/iWebSignature_base64",imageUrl:"/iWebSignature_image"},l.options,{dialogConfig:{okValue:"\u786e  \u5b9a",
cancelValue:"\u53d6  \u6d88",fixed:!0,backdropOpacity:.2,modal:!0},template:{}},window.KGCONFIG);f.addProvider=function(a,b,c){f.factory[a][b]=c};var K;f.init=function(a,b){h.extend(f.options,a);var c=f.options;c.serverUrl&&(c.b64Url="/signature/b64",c.imageUrl="/signature/image",c.serverUrl+="/rest");K=f.aisleKing=l.surry(c.serverUrl||c.clientUrl,"IWEBASSIST.iWebAssistCtrl.1","4240FB41-A213-42B6-8CB5E6705C99B319");var d=c.clientConfig;if(d&&"client"===c.sealType)for(var e in d)f.AXI("SetParamByName",
"SOFTTYPE",d[e],b);else b&&b();C.trigger("init")};f.factory={cert:{},seal:{}};f.SealService=y;f.CertService=H;f.asyn={};f._create=function(a){var b=this;b.setAttr(a);b.certService=new f.factory.cert[b.certType](a);b.sealService=new f.factory.seal[b.sealType](a);b.on("createSignature",function(a,d,e){a=[];var c=b._getLogInfo({LOGTYPE:"00",LOGSORT:"13",LOGMEMO:"\u76d6\u7ae0\u6210\u529f",LOGSORTSUBCLASS:"1301"});a.push(h.extend(d||{},c));e&&a.push(b._getLogInfo({LOGTYPE:"00",LOGSORT:"304",LOGMEMO:"\u6570\u5b57\u7b7e\u540d\u6210\u529f"}));
b.sealService.saveLog(a)});return this};y=function(){};y.prototype=f.prototype;y=new y;f._create.prototype=y;k.extend(y,{keyData:null,sealExpired:function(a,b,c,d,e){var n=this,g=!0;if(void 0===f.options.valid||null===f.options.valid||!1===f.options.valid)return n.certExpired(b,c,d);if(void 0!==a.endata&&null!==a.endata){var p=a.endata;a=parseInt(c.substr(0,4));e=parseInt(c.substr(5,2));var g=parseInt(c.substr(8,2)),h=parseInt(p.substr(0,4)),x=parseInt(p.substr(5,2)),p=parseInt(p.substr(8,2));a>h?
(n.warning({errcode:"11104"}),g=!1):a==h?e>x?(n.warning({errcode:"11104"}),g=!1):e==x?g>p?(n.warning({errcode:"11104"}),g=!1):g=!0:g=!0:g=!0}else return k.ajax({url:f.options.serverUrl+"/key/SealIsExpired",data:{keysn:n.keyData.keysn,year:(new Date).getFullYear(),month:(new Date).getMonth(),date:(new Date).getDate(),index:e},async:!1,success:function(a){if(a.error)return alert(a.error),!1;if(0==a.result)return n.certExpired(b,c,d);n.warning({errcode:"11104"});return!1},error:function(a){alert(a)}}),
!1;return g?n.certExpired(b,c,d):g},certExpired:function(a,b,c){var d=this,e=!1;if(void 0===f.options.valid||null===f.options.valid||!1===f.options.valid)return!0;l.surry(f.options.clientUrl,"IWEBASSIST.iWebAssistCtrl.1","4240FB41-A213-42B6-8CB5E6705C99B319").invoke("KGGetCerInfo","").ret(function(a){var f=parseInt(b.substr(0,4)),n=parseInt(b.substr(5,2)),g=parseInt(b.substr(8,2));if(a.result){a=a.certinfo.notAfter;var p=parseInt(a.substr(0,4)),h=parseInt(a.substr(4,1)),h=0==h?parseInt(a.substr(5,
1)):parseInt(a.substr(4,2)),k=parseInt(a.substr(6,1)),k=0==k?parseInt(a.substr(7,1)):parseInt(a.substr(6,2));f>p?d.warning({errcode:"11103"}):f==p?n>h?d.warning({errcode:"11103"}):n==h?g>k?d.warning({errcode:"11103"}):e=!0:e=!0:e=!0}else alert("\u83b7\u53d6key\u8bc1\u4e66\u5931\u8d25\uff01");void 0!==c&&null!==c&&c(e)});return e},runHW:function(a,b){var c=this;w.showLoading();"undefined"!=typeof a.imageData&&null!=a.imageData&&(void 0!==a.beginCall&&a.beginCall&&a.beginCall.call(c),c.sealService.loadSeal({data:a.imageData,
successCall:function(d){if(d.result&&d.seals){for(var e in d.seals){d.seals=[{width:a.width,height:a.height,imgext:d.seals[e].imgext,signname:a.name,signsn:d.seals[e].signsn,username:d.seals[e].username,imgdata:a.imageData}];break}c.keyData=d;c.showSeals(b)}else c.warning(d)},errorCall:function(a){c.error(a)}}))},run:function(a){var b=this;b.keyData?b.showSeals(a):(w.showLoading(),void 0!==a.beginCall&&a.beginCall&&a.beginCall.call(b),b.sealService.loadSeal({successCall:function(c){w.hideLoading();
c.result?c.seals?c.seals.length&&(b.keyData=c,void 0===c.ServerTime?void 0!==b.serverUrl&&null!==b.serverUrl?(c={usercode:b.usercode,keysn:b.keyData.keysn,signname:b.signname,authcode:f.authcode},l.surry(b.serverUrl).request("/key/load",c).ret(function(c){c.result?(b.curDate=c.ServerTime,b.keyData=c,b.showSeals(a)):alert(c.errmsg)}).fail(function(c,e){b.curDate=(new Date).toLocaleString();b.showSeals(a)})):(b.curDate=(new Date).toLocaleString(),b.showSeals(a)):(b.curDate=c.ServerTime,b.showSeals(a))):
b.warning({errcode:"11100"}):b.warning(c)},errorCall:function(a){b.error(a)}}));return this},formatPos:function(a){var b={};if(a){var c=function(a){var c=a.elemid;c||(c="body");b[c]=h.filter(a,c)};if(h.is("Array",a))for(var d=0;d<a.length;d++)c(a[d]);else h.is("String",a)?b[a]={}:c(a)}else b.body={};return b},exec:function(a,b,c,d){var e=this;delete e.signatureData;var g={timestamp:{time:(new Date).getTime()},appname:navigator.userAgent,documentid:e.documentid,documentname:e.documentname,moveable:h["boolean"](a,
"moveable",f.options.moveable),keysn:e.keyData.keysn,orgname:e.keyData.orgname,usercode:e.keyData.usercode,username:e.keyData.username||c.username,seal:c,protectedData:e.getProtectedData(a.protectedItems),sealType:a.sealType||e.sealType,extparam:a.extparam,ver:f.version};e.signatureData=g;e.certService.sData=e.signatureData;e.sealService.sData=e.signatureData;w.showLoading();var p=a.autoCert||e.autoCert,k=function(a){var b=e.signatureData;if(a&&a.position){b.position=e.formatPos(a.position);b.timeid=
(new Date).getTime();var d=(new f(a.signatureid||e.genId(),b)).load(f.options);a.okCall&&(b={name:c.signname,height:c.height,width:c.width,imgdata:e.toBase64Img(c)},a.okCall.call(d,function(b){b?(e.trigger("createSignature",d,a.logMeta,p),d.show()):d.remove()},b));w.hideLoading();delete e.signatureData}else throw Error("no set position");};if(p){e.getSignData(g);g=e.getH5SignData();if(a.signMeta)g[h.is("Array",a.signMeta)?"concat":"push"](a.signMeta);a.beforeSignCall&&a.beforeSignCall.call(e,g);e.runSign(g,
d,function(c){c.result&&k(a);b(c)})}else e.sealService.verifyPwd({pwd:d,keysn:g.keysn,successCall:function(c){c.result&&k(a);b(c)},errorCall:function(a){e.error(a)}})},showSeals:function(a){var b=this;this.showSealsDialog({_onOk:function(c,d,e){var g=this;void 0===f.options.valid||null===f.options.valid||!1===f.options.valid?(b.exec(a,function(a){a.result?(a=document.getElementById("kg-remenberPwd").checked,b.trigger("execSuccess",g,d,a),g.remove()):b.warning(a)},c,d),void 0!==a.endCall&&a.endCall&&
a.endCall.call(b)):void 0!==b.curDate&&null!==b.curDate&&b.sealExpired(c,a,b.curDate,function(e){e?(b.exec(a,function(a){a.result?(a=document.getElementById("kg-remenberPwd").checked,b.trigger("execSuccess",g,d,a),g.remove()):b.warning(a)},c,d),void 0!==a.endCall&&a.endCall&&a.endCall.call(b)):b.warning({errcode:"11103"})},e)}})},showSealsDialog:function(a){var b=this,c=b.keyData,d=[c],e=a._onOk;b.showDialog("showSealsBtl",{onShow:function(){var a=this.find(".kg-switcher");if(a.length){var c=new h.Switcher(a[0],
b.switcher||{});k(".arrow-right").click(function(a){a.preventDefault();c.swipeNext()});k(".arrow-left").click(function(a){a.preventDefault();c.swipePrev()});k(".kg-guide span").click(function(a){a.preventDefault();c.to(+this.getAttribute("index"))});b.switcher=c}b.trigger("showSealsDialog",this);b.trigger("showSealsDialog_PW",this)},onOk:function(){var a=this.find("#kg-password"),b=a.val();if(!b)return w.alert("\u8bf7\u8f93\u5165\u5bc6\u7801\uff01",function(){setTimeout(function(){a.focus()},100)}),
!1;var d=this.find(".kg-wrapper .active");e.call(this,c.seals[d.attr("index")],b,d.attr("index"));return!1},content:function(){d.push(b.toBase64Img);var a=[f.options.template.showSealsBtl].concat(d);return h.template.apply(null,a)}})},genId:function(){var a=(new Date).getTime(),b=""+Math.ceil((9301*(new Date).getTime()+49297)%233280/233280*99999),c=5-b.length;if(0<c)for(var d=0;d<c;d++)b="0"+b;return a+b},getSeal:function(a){return this.keyData.seals[a]},saveSignature:function(a,b,c,d){var e=this;
void 0!=a&&void 0!=b&&void 0!=c&&(a={documentId:a,signatureId:b,signaturedata:c},l.surry(f.options.serverUrl).request("/signature/saveHtmlSignature",a).ret(function(a){void 0!==d&&null!==d&&d.call(e,a)}).fail(function(a,b){alert(b)}))},removeSignature:function(a,b,c){var d=this;void 0!=a&&void 0!=b&&(a={documentId:a,signatureId:b},l.surry(f.options.serverUrl).request("/signature/reomveHtmlSignature",a).ret(function(a){void 0!==c&&null!==c&&c.call(d,a)}).fail(function(a,b){alert(b)}))},getSaveSignatures:function(a,
b){void 0!=a&&l.surry(f.options.serverUrl).request("/signature/getHtmlSignature",{documentId:a}).ret(function(a){a.result&&b(a.sign)}).fail(function(a,b){alert(b)})}});k.extend(f.options,{certType:"client",sealType:"client",clientUrl:"http://127.0.0.1:9581",moveable:!0,signable:!0,template:{showSealsBtl:w.template.sealTpl,signSignatureBtl:'<div id="kg-dialog-sign" class="kg-dialog kg-dialog-password kg-dialog-sign"><div class="kg-form"><div class="form-item clearfix"><label class="kg-sm kg-sm-3 kg-label">\u5bc6\u7801\uff1a</label><div class="kg-sm kg-sm-7"> <input type="password" name="password" id="kg-password" class="form-control"></div> </div></div></div>',
revokeSignatureBtl:'<div id="kg-verifyPass" class="kg-dialog  kg-dialog-password"><div class="kg-form"><div class="form-item clearfix"><label class="kg-sm kg-sm-3 kg-label">\u7b7e\u7ae0\uff1a</label><div class="kg-sm kg-sm-7"><p class="kg-form-static"><%this.signatureData.seal.signname%></p></div></div><div class="form-item clearfix"><label class="kg-sm kg-sm-3 kg-label">\u5bc6\u7801\uff1a</label><div class="kg-sm kg-sm-7"> <input type="password" name="password" id="kg-password" class="form-control"></div> </div></div></div>'}});
f.list={};f.updateList=[];f.removeList=[];f.loadSignature=function(a,b,c){var d={};void 0==f.options.extra&&(f.options.extra={});d[a]=b;void 0!==s.extra&&null!==s.extra&&(f.options.extra[s.signatureid]=s.extra);t(d,c||function(a){a.verify()})};f.loadSignatures=function(a,b){var c={};void 0==f.options.extra&&(f.options.extra={});if(h.is("Array",a))for(var d=0;d<a.length;d++){var e=a[d];c[e.signatureid]=e.signatureData;void 0!==e.extra&&null!==e.extra&&(f.options.extra[e.signatureid]=e.extra)}else for(d in a)c[d]=
a[d];t(c,b||function(){f.verify()})};f.clearRPW=function(){delCookie("ksn");delCookie("pwd");delCookie("ck")};var C=new u("Signature");f.addLiseter=function(a,b){C.on(a,b)};f.verify=function(){var a=f.list,b=[];C.trigger("beforeVerify",d);for(var c in a){var d=a[c];d._verify()||b.push(d);C.trigger("eachVerify",d)}C.trigger("verify",d);return b};f.bind=function(a){h.extend(f.asyn,a)};f.show=function(){var a=f.list,b;for(b in a)a[b].show()};f.hide=function(){var a=f.list,b;for(b in a)a[b].hide()};f.AXI=
function(a,b,c,d){f.authcode=c;var e=l.surry(f.options.clientUrl,"IWEBASSIST.iWebAssistCtrl.1","4240FB41-A213-42B6-8CB5E6705C99B319");e.invoke(a,b,c).ret(function(a){void 0!==d&&null!==d&&d(a)});return e};f.showAndHideBySignatureId=function(a,b){var c=f.list,d;for(d in c)0<=d.indexOf(a)&&(b?c[d].show():c[d].hide())};f.addIcon=function(a){var b=f.options.icons||[];b.push(a);f.options.icons=b};f.create=function(a){var b=k.extend({},f.options,a);void 0!==a&&void 0!==a.imgtag&&(f.options.imgtag=a.imgtag);
return new f._create(b)};k.extend(f.prototype,{saveSignatures:function(){},getSignatures:function(){}});u=function(a){var b=this;k.each(a,function(a,d){if("function"===typeof b[a])b[a](d);else b[a]=d})};h.inherit(u,f.SealService);y=function(a){var b=this;k.each(a,function(a,d){if("function"===typeof b[a])b[a](d);else b[a]=d})};h.inherit(y,f.CertService);k.extend(u.prototype,{saveLog:function(a){var b=[];h.is("Object",a)?b.push(a):b=a;a=q({MSG:b});l.surry(f.options.clientUrl,"IWEBASSIST.iWebAssistCtrl.1",
"4240FB41-A213-42B6-8CB5E6705C99B319").invoke("SetParamByName","SAVEMSG",a)},loadSeal:function(a){var b=this,c=a.successCall;l.surry(f.options.clientUrl,"IWEBASSIST.iWebAssistCtrl.1","4240FB41-A213-42B6-8CB5E6705C99B319").invoke("KGGetKeyInfo").ret(function(a){if(a.result&&void 0!==f.options.imgtag&&null!==f.options.imgtag&&0!==f.options.imgtag){var d=[],g;for(g in a.seals){var p=a.seals[g];void 0!==p&&parseInt(p.imgtag)==f.options.imgtag&&(d[d.length]=a.seals[g])}a.seals=d}c.call(b,a)})},verifyPwd:function(a){var b=
this,c=a.successCall;l.surry(f.options.clientUrl,"IWEBASSIST.iWebAssistCtrl.1","4240FB41-A213-42B6-8CB5E6705C99B319").invoke("KGVerifyPin",a.pwd,a.keysn).ret(function(a){c.call(b,a)})}});k.extend(y.prototype,{verifySign:function(a){var b=this,c=a.successCall;l.surry(f.options.clientUrl,"IWEBASSIST.iWebAssistCtrl.1","4240FB41-A213-42B6-8CB5E6705C99B319").invoke("KGVerifySignMessage","123456",a.signdata,a.signeddata).ret(function(a){c.call(b,a.result||"-8"!==a.errcode?a:{result:!1})})},parseDate:function(a){var b=
new Date;b.setFullYear(a.substring(0,4),+a.substring(4,6)-1,a.substring(6,8));b.setHours(a.substring(8,10),a.substring(10,12),a.substring(12,14),0);return b.getTime()},sign:function(a){for(var b=this,c=a.successCall,d=a.errorCall,e=a.signMeta,g=[],p=[],h=0;h<e.length;h++){var x=e[h];g.push(x.signdata);p.push(""+x.signdata.length)}l.surry(f.options.clientUrl,"IWEBASSIST.iWebAssistCtrl.1","4240FB41-A213-42B6-8CB5E6705C99B319").invoke("KGCrySignMessage",a.password,g.join(";"),+p[0]).ret(function(a){a=
k.extend({},a);a.result&&(a.certinfo.notAfter=b.parseDate(a.certinfo.notAfter),a.certinfo.notBefore=b.parseDate(a.certinfo.notBefore));c.call(b,a)}).fail(function(a,c){d.call(b,c);a(null)})}});f.addProvider("cert","client",y);f.addProvider("seal","client",u);u=function(a,b){var c=this;c.sData=b;k.each(a,function(a,b){if("function"===typeof c[a])c[a](b);else c[a]=b})};h.inherit(u,f.SealService);var I=function(a,b){var c=this;c.sData=b;k.each(a,function(a,b){if("function"===typeof c[a])c[a](b);else c[a]=
b})};h.inherit(I,f.CertService);k.extend(u.prototype,{getSealsUrl:"/key/load",verifyPwdUrl:"/key/verify",saveLogUrl:"/signature/saveLog",saveLog:function(a){a=q(a);l.surry(this.serverUrl).request(this.saveLogUrl,{loginfo:a}).ret(function(a){a.result||f.prototype.warning.call(null,a)}).fail(function(a,c){f.prototype.warning.call(null,c)})},loadSeal:function(a){var b=this,c=a.successCall,d=a.errorCall;a={usercode:b.usercode,keysn:b.keysn,signname:b.signname,authcode:b.authcode};l.surry(b.serverUrl).request(b.getSealsUrl,
a).ret(function(a){if(a.result&&void 0!==f.options.imgtag&&null!==f.options.imgtag&&0!==f.options.imgtag){var d=[],e;for(e in a.seals){var g=a.seals[e];void 0!==g&&parseInt(g.imgtag)==f.options.imgtag&&(d[d.length]=a.seals[e])}a.seals=d}c.call(b,a)}).fail(function(a,c){d.call(b,c)})},verifyPwd:function(a){var b=this,c=a.successCall,d=a.errorCall;a={usercode:b.sData.usercode,keysn:b.sData.keysn,password:a.pwd};l.surry(b.serverUrl).request(b.verifyPwdUrl,a).ret(function(a){c.call(b,a)}).fail(function(a,
c){d.call(b,c)})}});k.extend(I.prototype,{signUrl:"/sign",verifySignUrl:"/sign/verify",verifySign:function(a){var b=this,c=b.sData,d=a.successCall,e=a.errorCall;l.surry(b.serverUrl).request(b.verifySignUrl,{certType:c.certType,isUTF8:c.isUTF8,signsn:c.seal.signsn,html2sign:c.signMeta.html2sign,keysn:c.keysn,signsn:c.seal.signsn,signdata:a.signdata,signeddata:c.signMeta.signeddata,crtdata:c.signMeta.certinfo.crtdata}).ret(function(a){d.call(b,a)}).fail(function(a,c){e.call(b,c)})},sign:function(a){for(var b=
this,c=a.signMeta,d=a.errorCall,e=a.successCall,f=[],g=0;g<c.length;g++){var p=c[g];f.push("$"+(p.hashAlg||b.hashAlg)+"|"+(p.encryptAlg||b.encryptAlg)+"$"+p.signdata)}a={keysn:a.keysn,password:a.password,signdata:f.join(";"),signsn:a.signsn};l.surry(b.serverUrl).request(b.signUrl,a).ret(function(a){a.result&&(a.certinfo.algName=a.certinfo.algName.replace("with",""));e.call(b,a)}).fail(function(a,c){d.call(b,c)})}});f.addProvider("cert","server",I);f.addProvider("seal","server",u);f.alert=w.alert;
var M=f.version={name:"1.0.20",code:100};m.Signature=f})(this,kinggrid,jQuery);
var CryptoJS=CryptoJS||function(m,l){var k={},q=k.lib={},t=q.Base=function(){function g(){}return{extend:function(p){g.prototype=this;var h=new g;p&&h.mixIn(p);h.hasOwnProperty("init")||(h.init=function(){h.$super.init.apply(this,arguments)});h.init.prototype=h;h.$super=this;return h},create:function(){var g=this.extend();g.init.apply(g,arguments);return g},init:function(){},mixIn:function(g){for(var h in g)g.hasOwnProperty(h)&&(this[h]=g[h]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},
clone:function(){return this.init.prototype.extend(this)}}}(),v=q.WordArray=t.extend({init:function(g,h){g=this.words=g||[];this.sigBytes=h!=l?h:4*g.length},toString:function(g){return(g||h).stringify(this)},concat:function(g){var h=this.words,k=g.words,m=this.sigBytes;g=g.sigBytes;this.clamp();if(m%4)for(var l=0;l<g;l++)h[m+l>>>2]|=(k[l>>>2]>>>24-l%4*8&255)<<24-(m+l)%4*8;else if(65535<k.length)for(l=0;l<g;l+=4)h[m+l>>>2]=k[l>>>2];else h.push.apply(h,k);this.sigBytes+=g;return this},clamp:function(){var g=
this.words,h=this.sigBytes;g[h>>>2]&=4294967295<<32-h%4*8;g.length=m.ceil(h/4)},clone:function(){var g=t.clone.call(this);g.words=this.words.slice(0);return g},random:function(g){for(var h=[],k=0;k<g;k+=4)h.push(4294967296*m.random()|0);return new v.init(h,g)}}),z=k.enc={},h=z.Hex={stringify:function(g){var h=g.words;g=g.sigBytes;for(var k=[],l=0;l<g;l++){var m=h[l>>>2]>>>24-l%4*8&255;k.push((m>>>4).toString(16));k.push((m&15).toString(16))}return k.join("")},parse:function(g){for(var h=g.length,
k=[],l=0;l<h;l+=2)k[l>>>3]|=parseInt(g.substr(l,2),16)<<24-l%8*4;return new v.init(k,h/2)}},E=z.Latin1={stringify:function(g){var h=g.words;g=g.sigBytes;for(var k=[],l=0;l<g;l++)k.push(String.fromCharCode(h[l>>>2]>>>24-l%4*8&255));return k.join("")},parse:function(g){for(var h=g.length,k=[],l=0;l<h;l++)k[l>>>2]|=(g.charCodeAt(l)&255)<<24-l%4*8;return new v.init(k,h)}},A=z.Utf8={stringify:function(g){try{return decodeURIComponent(escape(E.stringify(g)))}catch(p){throw Error("Malformed UTF-8 data");
}},parse:function(g){return E.parse(unescape(encodeURIComponent(g)))}},u=q.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new v.init;this._nDataBytes=0},_append:function(g){"string"==typeof g&&(g=A.parse(g));this._data.concat(g);this._nDataBytes+=g.sigBytes},_process:function(g){var h=this._data,k=h.words,l=h.sigBytes,u=this.blockSize,t=l/(4*u),t=g?m.ceil(t):m.max((t|0)-this._minBufferSize,0);g=t*u;l=m.min(4*g,l);if(g){for(var q=0;q<g;q+=u)this._doProcessBlock(k,q);q=k.splice(0,g);h.sigBytes-=
l}return new v.init(q,l)},clone:function(){var g=t.clone.call(this);g._data=this._data.clone();return g},_minBufferSize:0});q.Hasher=u.extend({cfg:t.extend(),init:function(g){this.cfg=this.cfg.extend(g);this.reset()},reset:function(){u.reset.call(this);this._doReset()},update:function(g){this._append(g);this._process();return this},finalize:function(g){g&&this._append(g);return this._doFinalize()},blockSize:16,_createHelper:function(g){return function(h,k){return(new g.init(k)).finalize(h)}},_createHmacHelper:function(g){return function(h,
k){return(new B.HMAC.init(g,k)).finalize(h)}}});var B=k.algo={};return k}(Math);
(function(){var m=CryptoJS,l=m.lib,k=l.WordArray,q=l.Hasher,t=[],l=m.algo.SHA1=q.extend({_doReset:function(){this._hash=new k.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,l){for(var h=this._hash.words,m=h[0],q=h[1],u=h[2],v=h[3],g=h[4],p=0;80>p;p++){if(16>p)t[p]=k[l+p]|0;else{var x=t[p-3]^t[p-8]^t[p-14]^t[p-16];t[p]=x<<1|x>>>31}x=(m<<5|m>>>27)+g+t[p];x=20>p?x+((q&u|~q&v)+1518500249):40>p?x+((q^u^v)+1859775393):60>p?x+((q&u|q&v|u&v)-1894007588):x+((q^u^
v)-899497514);g=v;v=u;u=q<<30|q>>>2;q=m;m=x}h[0]=h[0]+m|0;h[1]=h[1]+q|0;h[2]=h[2]+u|0;h[3]=h[3]+v|0;h[4]=h[4]+g|0},_doFinalize:function(){var k=this._data,l=k.words,h=8*this._nDataBytes,m=8*k.sigBytes;l[m>>>5]|=128<<24-m%32;l[(m+64>>>9<<4)+14]=Math.floor(h/4294967296);l[(m+64>>>9<<4)+15]=h;k.sigBytes=4*l.length;this._process();return this._hash},clone:function(){var k=q.clone.call(this);k._hash=this._hash.clone();return k}});m.SHA1=q._createHelper(l);m.HmacSHA1=q._createHmacHelper(l)})(this);
// V1.0.0.254    
//# sourceMappingURL=c:/signature.min.map
