@{
    ViewBag.Title = "选择项目";
}
<div class="mini-toolbar" style="padding: 2px; border-bottom: 0;">
    <table style="width: 100%;">
        <tr>
            <td style="width: 100%;">
                <a class="mini-button" iconcls="icon-ok" plain="true" onclick="returnValue()">选择</a>
                <a class="mini-button" plain="true" iconcls="icon-cancel" onclick="closeWindow()">取消</a>
            </td>
            <td style="white-space: nowrap;">
                <input class="mini-buttonedit searchbox" id="key" emptytext="请输入项目编号或项目名称" style="width: 200px;"
                    onenter="quickSearch('Code,Name');" onbuttonclick="quickSearch('Code,Name');" />
            </td>
        </tr>
    </table>
</div>
<div class="mini-fit">
    <div id="dataGrid" class="mini-datagrid" style="width: 100%; height: 100%;" idfield="ID"
        allowmovecolumn="false" allowresize="true" multiselect="true" url="GetProjectInfo"
        pagesize="20" onselectionchanged="onSelectoinChanged">
        <div property="columns">
            <div type="checkcolumn">
            </div>
            <div field="Code" headeralign="center" width="100" allowsort="true" align="center"
                renderer="onLinkRender">
                项目编号</div>
            <div field="Name" headeralign="center" width="200" allowsort="true" align="left">
                项目名称</div>
        </div>
    </div>
</div>
<script type="text/javascript">

</script>
<script type="text/javascript">

    var selectMaps = {};
    function returnValue() {
        var data = [];
        for (var pageIndex in selectMaps) {
            var rows = selectMaps[pageIndex];
            data.addRange(rows);
        }
        closeWindow(data);
    }

    function onSelectoinChanged(e) {
        var grid = mini.get("dataGrid");
        var rows = grid.getSelecteds();
        selectMaps[grid.getPageIndex()] = rows;
    }

</script>
